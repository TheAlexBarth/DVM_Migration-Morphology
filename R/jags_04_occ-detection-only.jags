model {
  
  #likelihood function
  for(i in 1:nSites) {
    
    #biological process
    z[i] ~ dbern(psi[db[i]])
    
    # observation process
    for(j in 1:n[i]) {
      
      logit(p[i, j]) <- a0 + a_vs * vs[i, j]
      Y[i,j] ~ dbern(p[i, j] * z[i])
      
    }
  }
  
  #priors
  
  p0 ~ dbeta(1,1)
  a0 <- logit(p0)

  for(i in 1:dbLength) {
    psi[i] ~ dbeta(1,1)
  }
  
  a_vs ~ dnorm(0,1/10^2)
  
  #derived variable
  N = sum(z)
}